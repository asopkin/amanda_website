function previewHandler(canvas,document){var context=canvas.getContext("2d");fillBackgroundColor(canvas,context,document);var selectObj=document.getElementById("shape"),index=selectObj.selectedIndex,shape=selectObj[index].value,gimme=document.getElementById("filter"),index2=gimme.selectedIndex,filter=gimme[index2].value;if("pattern"==shape&&make_base(canvas,context),"squares"==shape)for(var squares=0;20>squares;squares++)drawSquare(canvas,context);else if("circles"==shape)for(var circles=0;20>circles;circles++)drawCircle(canvas,context);"grayscale"==filter&&filterImage(canvas,context),"brighten"==filter&&brightenImage(canvas,context),(filter="threshold")&&thresholdImage(canvas,context),drawText(canvas,context,document)}function make_base(canvas,context){base_image=new Image;var randnumbr=Math.floor(3*Math.random());image_arr=["img/base.png","img/base2.png","img/base3.png"],base_image.src=image_arr[randnumbr];var x=canvas.width,y=canvas.height;base_image.onload=function(){context.drawImage(base_image,0,0,x,y),drawText(canvas,context)}}function makeImage(){var canvas=document.getElementById("art-board");window.location=canvas.toDataURL("image/png"),canvas.onclick=function(){window.location=canvas.toDataURL("image/png")}}function drawSquare(canvas,context){var w=Math.floor(40*Math.random()),x=Math.floor(Math.random()*canvas.width),y=Math.floor(Math.random()*canvas.height);context.fillStyle="#DA4453",context.fillRect(x,y,w,w)}function fillBackgroundColor(canvas,context,document){var selectObj=document.getElementById("bgColor"),index=selectObj.selectedIndex,bgColor=selectObj.options[index].value;context.fillStyle=bgColor,context.fillRect(0,0,canvas.width,canvas.height)}function drawCircle(canvas,context){var radius=Math.floor(40*Math.random()),x=Math.floor(Math.random()*canvas.width),y=Math.floor(Math.random()*canvas.height);context.beginPath(),context.arc(x,y,radius,0,360*Math.PI/180,!0),context.fillStyle="red",context.fill()}function drawText(canvas,context,document){var selectObj=document.getElementById("textColor"),content=document.getElementById("content").value,index=selectObj.selectedIndex,fgColor=selectObj[index].value;context.fillStyle=fgColor,context.font="bold 1em sans-serif",context.textAlign="left",context.font="bold 1em sans-serif",context.textAlign="right",context.fillText(content,canvas.width-20,canvas.height-40)}function filterImage(canvas,context){for(imageData=context.getImageData(0,0,canvas.width,canvas.height),data=imageData.data,iLen=data.length,i=0;i<iLen;i+=4)avg=.3*data[i]+.59*data[i+1]+.11*data[i+2],data[i]=avg+100,data[i+1]=avg+50,data[i+2]=avg+255;context.putImageData(imageData,0,0)}function thresholdImage(canvas,context){imageData=context.getImageData(0,0,canvas.width,canvas.height),data=imageData.data,iLen=data.length;for(var threshold=100,i=0;i<data.length;i+=4){var r=data[i],g=data[i+1],b=data[i+2],v=.2126*r+.7152*g+.0722*b>=threshold?255:0;data[i]=data[i+1]=data[i+2]=v}context.putImageData(imageData,0,0)}function brightenImage(canvas,context){imageData=context.getImageData(0,0,canvas.width,canvas.height),adjustment=200,data=imageData.data,iLen=data.length;for(var i=0;i<data.length;i+=4)data[i]+=adjustment,data[i+1]+=adjustment,data[i+2]+=adjustment;context.putImageData(imageData,0,0)}$("button").click(function(){$(this).toggleClass("expanded").siblings("div").slideToggle()}),$(window).scroll(function(){$(document).scrollTop()>10?$("#nav").addClass("shrink"):$("#nav").removeClass("shrink")}),$(document).ready(function(){$('a[href^="#"]').on("click",function(e){e.preventDefault();var wdw=this.hash,$wdw=$(wdw);$("html, body").stop().animate({scrollTop:$wdw.offset().top},700,"swing",function(){window.location.hash=wdw})})});